<!DOCTYPE html><html><head><title>Bellmin: Query Entailment Analyzer</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="com.github.gsk-aiops" /><meta name="description" content="Efficiently running SPARQL queries in Spark" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="Bellmin: Query Entailment Analyzer" /><meta name="title" property="og:title" content="Bellmin: Query Entailment Analyzer" /><meta name="og:site_name" content="Bellmin" /><meta name="og:url" content="https://github.com/gsk-aiops/bellman-algebra-parser" /><meta name="og:type" content="website" /><meta name="og:description" content="Efficiently running SPARQL queries in Spark" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="Bellmin: Query Entailment Analyzer" /><meta name="twitter:image" content="/img/poster.png" /><meta name="twitter:description" content="Efficiently running SPARQL queries in Spark" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/github-gist.css" /><link rel="stylesheet" href="/css/light-style.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"></div><span>Bellmin</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/docs/intro" title="Intro" class="">Intro</a></div> <div class="sidebar-nav-item  "><a href="/docs/howto" title="Getting Started" class="">Getting Started</a></div> <div class="sidebar-nav-item  "><a href="/docs/compilation" title="Compilation" class="">Compilation</a></div> <div class="sidebar-nav-item  open"><a href="/docs/phases" title="Phases" class="drop-nested">Phases</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/docs/phases/parser" title="Parse Query" class="">Parse Query</a> <a href="/docs/phases/transformToGraph" title="Transform to Graph" class="">Transform to Graph</a> <a href="/docs/phases/staticAnalysis" title="Static Analysis" class="">Static Analysis</a> <a href="/docs/phases/optimizer" title="Optimizer" class="">Optimizer</a> <a href="/docs/phases/validateDataframe" title="Validate DataFrame" class="">Validate DataFrame</a> <a href="/docs/phases/queryEntailmentAnalyzer" title="Query Entailment Analyzer" class="active">Query Entailment Analyzer</a> <a href="/docs/phases/schemaEntailmentAnalyzer" title="Ontology Entailment Analyzer" class="">Ontology Entailment Analyzer</a> <a href="/docs/phases/intersectEntailments" title="Intersect Entailments" class="">Intersect Entailments</a> <a href="/docs/phases/forwardChaining" title="Forward Chaining" class="">Forward Chaining</a> <a href="/docs/phases/backwardChaining" title="Backward Chaining" class="">Backward Chaining</a> <a href="/docs/phases/dataframeTyper" title="DataFrame Typer" class="">DataFrame Typer</a> <a href="/docs/phases/engine" title="Engine" class="">Engine</a> <a href="/docs/phases/rdfFormatter" title="RDF Formatter" class="">RDF Formatter</a></div></div> <div class="sidebar-nav-item  "><a href="/docs/phases/optimizer" title="Optimization" class="drop-nested">Optimization</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/docs/phases/optimization/graphsPushdown" title="Graphs Pushdown" class="">Graphs Pushdown</a> <a href="/docs/phases/optimization/joinBgps" title="Join BGPs" class="">Join BGPs</a> <a href="/docs/phases/optimization/combineFlatBgps" title="Combine Flat BGPs" class="">Combine Flat BGPs</a> <a href="/docs/phases/optimization/reorderBgps" title="Reorder BGPs" class="">Reorder BGPs</a> <a href="/docs/phases/optimization/removeNestedProject" title="Remove Nested Project" class="">Remove Nested Project</a> <a href="/docs/phases/optimization/subqueryPushdown" title="Subquery Pushdown" class="">Subquery Pushdown</a></div></div> <div class="sidebar-nav-item  "><a href="/docs/configuration" title="Configuration" class="">Configuration</a></div> <div class="sidebar-nav-item  "><a href="/docs/inference" title="Inference" class="drop-nested">Inference</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/docs/inference/subclass" title="Subclass Use Case" class="">Subclass Use Case</a> <a href="/docs/inference/subproperty" title="Subproperty Use Case" class="">Subproperty Use Case</a> <a href="/docs/inference/domain-range" title="Domain/Range Use Case" class="">Domain/Range Use Case</a> <a href="/docs/inference/equivalentClass" title="Equivalent Class Use Case" class="">Equivalent Class Use Case</a> <a href="/docs/inference/equivalentProperty" title="Equivalent Property Use Case" class="">Equivalent Property Use Case</a></div></div> <div class="sidebar-nav-item  "><a href="/docs/techniques" title="Techniques" class="">Techniques</a></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/tomymeren/bellman" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/tomymeren/bellman" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="tomymeren" data-github-repo="bellman"><div class="content-wrapper"><section><h2 id="query-entailment-analyzer">Query Entailment Analyzer</h2>

<p><strong>Query Entailment Analyzer</strong> phase is part of the inference flow, it will infer, based on the input query, what
<strong>RDFS entailments</strong> and <strong>OWL axioms</strong> are suitable to be applied, this way it will boost the performance 
of reasoning by not performing all the rules when ever possible.</p>

<p>This rule inference is constrained to only be applied to those rules (entailments/axioms) that has been set on the 
<a href="../configuration.md"><strong>configuration</strong></a>, and when the <strong>inference mode</strong> of the engine is set to one of the <strong>Auto</strong> modes
(<strong>ForwardChainingAuto, BackwardChainingAuto and FullAuto</strong>). if other mode is selected it will apply all the rules
defined by the <strong>inferenceEntailments</strong> flag.</p>

<h3 id="example">Example</h3>

<p>In the BGP of this query we only have the <em>rdf:type</em> predicate. What this is that means that the triples that will 
be returned from the inference flow will only be those that have been materialized with the <em>rdf:type</em>.</p>

<div class="language-sparql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">PREFIX</span><span class="w"> </span><span class="nn">rdf</span><span class="o">:</span><span class="w"> </span><span class="nn">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span><span class="w">
</span><span class="k">PREFIX</span><span class="w"> </span><span class="nn">class</span><span class="o">:</span><span class="w"> </span><span class="nn">&lt;http://example.org/class/&gt;</span><span class="w">

</span><span class="k">SELECT</span><span class="w"> </span><span class="nv">?person</span><span class="w">
</span><span class="k">WHERE</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="nv">?person</span><span class="w"> </span><span class="nn">rdf</span><span class="o">:</span><span class="ss">type</span><span class="w"> </span><span class="nn">class</span><span class="o">:</span><span class="ss">Person</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The rules that can materialize triples with that predicate <em>rdf:type</em> are:</p>

<ul>
  <li><strong>Rdfs2</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IF                      THEN
+----------------------+--------------------+
|aaa rdfs:domain xxx . | uuu rdf:type xxx . |
|uuu aaa yyy .         |                    |
+----------------------+--------------------+
</code></pre></div>    </div>
  </li>
  <li><strong>Rdfs3</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IF                      THEN
+----------------------+--------------------+
|aaa rdfs:range xxx .  | vvv rdf:type xxx . |
|uuu aaa vvv .         |                    |
+----------------------+--------------------+
</code></pre></div>    </div>
  </li>
  <li><strong>Rdfs9</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IF                           THEN
+---------------------------+--------------------+
|uuu rdfs:subClassOf xxx .  | vvv rdf:type xxx . |
|vvv rdf:type uuu .         |                    |
+---------------------------+--------------------+
</code></pre></div>    </div>
  </li>
  <li><strong>Rdfs11</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IF                           THEN
+---------------------------+---------------------------+
|uuu rdfs:subClassOf vvv .  | uuu rdfs:subClassOf xxx . |
|vvv rdfs:subClassOf xxx .  |                           |
+---------------------------+---------------------------+
</code></pre></div>    </div>
  </li>
  <li><strong>OwlCaxEqc1</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IF                             THEN
+-----------------------------+-----------------+
|c1 owl:equivalentClass c2 .  | x rdf:type c2 . |
|x rdf:type c1 .              |                 |
+-----------------------------+-----------------+
</code></pre></div>    </div>
  </li>
  <li><strong>OwlCaxEqc2</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>IF                             THEN
+-----------------------------+-----------------+
|c1 owl:equivalentClass c2 .  | x rdf:type c1 . |
|x rdf:type c2 .              |                 |
+-----------------------------+-----------------+
</code></pre></div>    </div>
  </li>
</ul>

<p>What all these rules have in common is that in the <em>rhs</em> (THEN part), they materialize triples that match the
predicate of the triple in the query BGP (<em>rdf:type</em>), except for the transitive rule <strong>Rdfs11</strong>.</p>

<p>As a consequence of the hypothetical execution of some rules that at a first glance analysis 
are not suitable to be applied by the <strong>Query Entailment Analyzer</strong> phase, it could lead to the materialization 
of some triples that will after be used to feed other rules, that are suitable of materializing triples
with the <em>rdf:type</em> predicate. Because of this reason the solution set may not be complete when using <strong>Auto</strong> modes.</p>

<p>This is the case between <strong>Rdfs11</strong> and <strong>Rdfs9</strong>. <strong>Rdfs11</strong> can materialize triples with predicate <em>rdfs:subClassOf</em>
that can feed <strong>Rdfs9</strong> that materializes triples with <em>rdf:type</em> predicate. 
If <strong>Rdfs11</strong> were not added as to be a suitable rule for the example query, we will be loosing some solutions from 
the final inferred solution set. This kind of interactions can also happen between other rules that hasn’t been 
contemplated by the moment.</p>
</section></div></div></div></div><script src="/highlight/highlight.pack.js"></script><script src="/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/js/search.js"></script><script src="/js/docs.js"></script></body></html>